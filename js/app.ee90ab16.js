(function(t){function e(e){for(var a,o,n=e[0],c=e[1],u=e[2],v=0,d=[];v<n.length;v++)o=n[v],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,n=1;n<i.length;n++){var c=i[n];0!==r[c]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},r={app:0},s=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/film-app/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var u=0;u<n.length;u++)e(n[u]);var l=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},"4e77":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),r=i("8c4f"),s=i("5f5b"),o=i("b1e0"),n=i("2909"),c=i("5530"),u=(i("99af"),i("a434"),i("d81d"),i("c740"),i("2f62")),l=i("bc3a"),v=i.n(l),d="?api_key=52f5ef3c38240ee0230e711397b94695";a["default"].use(u["a"]);var f=new u["a"].Store({state:{test:"test",isLoading:!1,searchPhrase:null,movies:[],movieDetails:null,searchedMovies:[],favouriteMovies:[]},getters:{GET_MOVIES_ARR:function(t){return t.movies},GET_MOVIES_ARR_COUNT:function(t,e){return e.GET_MOVIES_ARR.length},GET_MOVIE_DETAILS:function(t){return t.movieDetails},GET_SEARCH_MOVIES:function(t){return t.searchedMovies},GET_SEARCH_MOVIES_COUNT:function(t,e){return e.GET_SEARCH_MOVIES.length},GET_FAVOURITE_MOVIES:function(t){return t.favouriteMovies},GET_FAVOURITE_MOVIES_COUNT:function(t,e){return e.GET_FAVOURITE_MOVIES.length},GET_LOADING_STATUS:function(t){return t.isLoading},GET_SEARCH_PHRASE:function(t){return t.searchPhrase}},mutations:{SET_MOVIES_ARR:function(t,e){t.movies=e},SET_SEARCHED_MOVIES:function(t,e){t.searchedMovies=e},SET_FAVOURITE_MOVIES:function(t,e){t.searchedMovies=e},SET_LOADING_STATUS:function(t,e){t.isLoading=e},SET_SEARCH_PHRASE:function(t,e){t.searchPhrase=e},SET_MOVIE_DETAILS:function(t,e){t.movieDetails=e},ADD_TO_FAVOURITES:function(t,e){var i=Object(c["a"])(Object(c["a"])({},e),{},{isFavourite:"true"});t.favouriteMovies=[].concat(Object(n["a"])(t.favouriteMovies),[i])},REMOVE_FROM_FAVOURITES:function(t,e){var i=Object(n["a"])(t.favouriteMovies);i.splice(e,1),t.favouriteMovies=i},UPDATE_POP_LIST:function(t,e){var i=t.movies[e].isFavourite;t.movies[e].isFavourite="true"===i?"false":"true"},UPDATE_SEARCH_LIST:function(t,e){var i=t.searchedMovies[e].isFavourite;t.searchedMovies[e].isFavourite="true"===i?"false":"true"}},actions:{fetchPopularMovies:function(t){var e=t.commit;e("SET_LOADING_STATUS",!0),v.a.get("/movie/popular".concat(d)).then((function(t){var i=t.data;setTimeout((function(){var t=i.results.map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{isFavourite:"false"})}));e("SET_MOVIES_ARR",t),e("SET_LOADING_STATUS",!1)}),2e3)}))},fetchSearchMovies:function(t){var e=t.commit,i=t.getters;e("SET_LOADING_STATUS",!0),v.a.get("/search/movie".concat(d,"&query=").concat(i.GET_SEARCH_PHRASE)).then((function(t){var i=t.data,a=i.results.map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{isFavourite:"false"})}));e("SET_SEARCHED_MOVIES",a),e("SET_LOADING_STATUS",!1)}))},fetchMovieDetails:function(t,e){var i=t.commit;i("SET_LOADING_STATUS",!0),v.a.get("/movie/".concat(e).concat(d)).then((function(t){var e=t.data;i("SET_MOVIE_DETAILS",e),i("SET_LOADING_STATUS",!1)}))},toggleFavourite:function(t,e){var i=t.commit,a=t.state,r=e.id,s=a.favouriteMovies.findIndex((function(t){return t.id===r})),o=a.movies.findIndex((function(t){return t.id===r})),n=a.searchedMovies.findIndex((function(t){return t.id===r}));-1===s?i("ADD_TO_FAVOURITES",e):i("REMOVE_FROM_FAVOURITES",s),-1!==o&&i("UPDATE_POP_LIST",o),-1!==n&&i("UPDATE_SEARCH_LIST",n)}}}),_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-card",{attrs:{"no-body":""}},[i("b-tabs",{attrs:{card:""}},[i("b-tab",{attrs:{title:"Popular",active:""}},[i("h2",[t._v("Popular movies")]),i("FilmList",{attrs:{"movies-arr":t.moviesArr}})],1),i("b-tab",{attrs:{title:"Discover"}},[i("h2",[t._v("Search for a movie.")]),i("SearchBox"),i("FilmList",{attrs:{"movies-arr":t.searchedMovies}})],1),i("b-tab",{attrs:{title:"Favourite"}},[i("h2",[t._v("Favourite movies")]),0===t.favouriteCount?[i("p",{staticClass:"mb-0 text-muted"},[t._v("Favourite list empty")])]:[i("FilmList",{attrs:{"movies-arr":t.favouriteMovies}})]],2)],1)],1)],1)},h=[],m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-card",{staticClass:"mb-4",attrs:{"bg-variant":"light"}},[i("div",{staticClass:"input-group"},[i("b-form-input",{staticClass:"mr-2",attrs:{placeholder:"Search for movie…"},model:{value:t.searchPhrase,callback:function(e){t.searchPhrase=e},expression:"searchPhrase"}}),i("b-button",{attrs:{variant:"primary"},on:{click:t.searchMovies}},[t._v("Search")])],1)])],1)},p=[],b={name:"SearchBox",data:function(){return{}},methods:{searchMovies:function(){this.searchPhrase.length>=3&&this.$store.dispatch("fetchSearchMovies",this.searchPhrase)}},computed:{searchPhrase:{get:function(){return this.$store.getters.GET_SEARCH_PHRASE},set:function(t){this.$store.commit("SET_SEARCH_PHRASE",t)}}}},g=b,E=i("2877"),S=Object(E["a"])(g,m,p,!1,null,"ee84d278",null),T=S.exports,O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("b-skeleton-wrapper",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"loading",fn:function(){return[i("b-card-group",{attrs:{columns:""}},t._l(t.skeletonCards,(function(t,e){return i("b-card",{key:e},[i("b-skeleton-img",{attrs:{animation:"wave",aspect:"3:4"}}),i("b-skeleton",{staticClass:"mt-3",attrs:{animation:"wave",height:"35px",width:"85%"}}),i("b-skeleton",{attrs:{animation:"wave",height:"19px",width:"75%"}})],1)})),1)]},proxy:!0}])},[i("b-card-group",{attrs:{columns:""}},t._l(t.moviesArr,(function(t){return i("FilmItem",{key:t.id,attrs:{"movie-data":t}})})),1)],1)],1)},C=[],A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-card",{staticClass:"text-left",attrs:{"no-body":"",overlay:""}},[i("div",{staticClass:"img-wrap"},[t.movieData.poster_path?i("b-card-img",{attrs:{src:t.imgBaseURL+t.movieData.poster_path,alt:t.movieData.title+"poster",top:""}}):t._e(),i("b-badge",{attrs:{title:"overall rating",variant:t.badgeColor(t.movieData.vote_average)}},[t._v(" "+t._s(t.movieData.vote_average)+" ")])],1),i("b-card-header",{staticClass:"position-relative"},[i("b-card-title",{staticClass:"mt-2",attrs:{"title-tag":"h4"}},[t._v(" "+t._s(t.movieData.title)+" "),i("span",{staticClass:"h5"},[t._v("("+t._s(t._f("getYear")(t.movieData.release_date))+")")])])],1),i("b-card-body",[i("div",{staticClass:"text-right"}),i("b-card-text",[t._v(" "+t._s(t._f("sliceDescription")(t.movieData.overview))+" ")]),i("div",[i("router-link",{staticClass:"btn btn-primary mr-2",attrs:{to:"/movie/"+t.movieData.id}},[t._v("See details")]),i("b-button",{staticClass:"btn--favourite",attrs:{variant:"light"},on:{click:t.toggleFavourite}},["true"!==t.movieData.isFavourite?i("svg",{staticClass:"bi bi-heart",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"}})]):i("svg",{staticClass:"bi bi-heart-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"}})])])],1)],1)],1)},M=[],w="https://www.themoviedb.org//t/p/w220_and_h330_face/",I={data:function(){return{imgBaseURL:w}},filters:{getYear:function(t){return t.substr(0,4)},timeConvert:function(t){var e=Math.floor(t/60),i=t%60;return"".concat(e,"h ").concat(i,"min")}},methods:{badgeColor:function(t){return 7<t?"success":4<t?"warning":"danger"}}},R={name:"FilmItem",props:["movieData"],mixins:[I],data:function(){return{}},methods:{toggleFavourite:function(){this.$store.dispatch("toggleFavourite",this.movieData)}},filters:{sliceDescription:function(t){var e=80;return t.substr(0,e)+"…"}}},D=R,x=(i("bcc3"),Object(E["a"])(D,A,M,!1,null,null,null)),F=x.exports,y={name:"FilmList",components:{FilmItem:F},props:{moviesArr:{type:Array,required:!0}},data:function(){return{skeletonCards:6}},computed:{searchMovies:function(){return this.$store.getters.GET_SEARCH_MOVIES},loading:function(){return this.$store.getters.GET_LOADING_STATUS}}},V=y,G=(i("74b2"),Object(E["a"])(V,O,C,!1,null,null,null)),U=G.exports,P={name:"Homepage",components:{FilmList:U,SearchBox:T},mounted:function(){0===this.moviesCount&&this.$store.dispatch("fetchPopularMovies")},computed:{moviesArr:function(){return this.$store.getters.GET_MOVIES_ARR},moviesCount:function(){return this.$store.getters.GET_MOVIES_ARR_COUNT},favouriteMovies:function(){return this.$store.getters.GET_FAVOURITE_MOVIES},favouriteCount:function(){return this.$store.getters.GET_FAVOURITE_MOVIES_COUNT},searchedMovies:function(){return this.$store.getters.GET_SEARCH_MOVIES},searchedCount:function(){return this.$store.getters.GET_SEARCH_MOVIES_COUNT}}},L=P,k=Object(E["a"])(L,_,h,!1,null,"e58cb5ea",null),$=k.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"text-left mb-2"},[i("router-link",{staticClass:"btn btn-secondary",attrs:{to:"/"}},[t._v("Go back")])],1),i("b-skeleton-wrapper",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"loading",fn:function(){return[i("b-card",[i("b-skeleton-img",{attrs:{animation:"wave",aspect:"3:4"}}),i("b-skeleton",{staticClass:"mt-3",attrs:{animation:"wave",height:"35px",width:"85%"}}),i("b-skeleton",{attrs:{animation:"wave",height:"19px",width:"75%"}})],1)]},proxy:!0}])},[t.movie?i("b-card",{staticClass:"text-left mb-4",attrs:{"no-body":""}},[i("b-card-body",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-12 col-md-4"},[t.movie.poster_path?i("b-card-img",{staticClass:"mb-4",attrs:{src:t.imgBaseURL+t.movie.poster_path,alt:t.movie.title+"poster",top:""}}):t._e()],1),i("div",{staticClass:"col-sm-12 col-md-8"},[i("header",[i("h2",[t._v(t._s(t.movie.title)+" "),i("span",{staticClass:"h4"},[t._v("("+t._s(t._f("getYear")(t.movie.release_date))+")")])]),t.movie.tagline?i("p",{staticClass:"h5 font-italic"},[t._v(" "+t._s(t.movie.tagline))]):t._e()]),i("section",[i("dl",{staticClass:"mt-4"},[i("div",[i("dt",[t._v("Runtime:")]),i("dd",[t._v(t._s(t._f("timeConvert")(t.movie.runtime)))])]),i("div",[i("dt",[t._v("Genres:")]),i("dd",[i("ul",{staticClass:"genre-list"},t._l(t.movie.genres,(function(e){return i("li",{key:e.id},[t._v(t._s(e.name))])})),0)])]),i("div",[i("dt",[t._v("User score:")]),i("dd",{staticClass:"h5"},[i("b-badge",{attrs:{variant:t.badgeColor(t.movie.vote_average)}},[t._v(t._s(t.movie.vote_average))])],1)])]),i("b-button",{staticClass:"btn--favourite",attrs:{variant:"light"},on:{click:t.toggleFavourite}},["true"!==t.movie.isFavourite?i("svg",{staticClass:"bi bi-heart",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}},[i("path",{attrs:{d:"M8 2.748l-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"}})]):i("svg",{staticClass:"bi bi-heart-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}},[i("path",{attrs:{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"}})])])],1),i("section",{staticClass:"mt-4"},[i("h3",[t._v("Overview")]),i("p",[t._v(t._s(t.movie.overview))])])])])])],1):t._e()],1)],1)},H=[],N={name:"FilmDetails",mixins:[I],data:function(){return{id:this.$route.params.id}},mounted:function(){this.$store.dispatch("fetchMovieDetails",this.id)},methods:{toggleFavourite:function(){this.$store.dispatch("toggleFavourite",this.movie)}},computed:{movie:function(){return this.$store.getters.GET_MOVIE_DETAILS},loading:function(){return this.$store.getters.GET_LOADING_STATUS}}},B=N,z=(i("df66"),Object(E["a"])(B,j,H,!1,null,null,null)),Y=z.exports,q=[{path:"",component:$},{path:"/movie/:id",component:Y}],J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"container"},[i("main",[i("router-view")],1)])])},K=[],Q={name:"App"},W=Q,X=(i("034f"),Object(E["a"])(W,J,K,!1,null,null,null)),Z=X.exports;i("f9e3"),i("2dd8");a["default"].config.productionTip=!1,a["default"].use(r["a"]),a["default"].use(s["a"]),a["default"].use(o["a"]),v.a.defaults.baseURL="https://api.themoviedb.org/3";var tt=new r["a"]({routes:q,mode:"history"});new a["default"]({router:tt,store:f,render:function(t){return t(Z)}}).$mount("#app")},"74b2":function(t,e,i){"use strict";i("4e77")},"85ec":function(t,e,i){},bcc3:function(t,e,i){"use strict";i("ec87")},dd2b:function(t,e,i){},df66:function(t,e,i){"use strict";i("dd2b")},ec87:function(t,e,i){}});
//# sourceMappingURL=app.ee90ab16.js.map